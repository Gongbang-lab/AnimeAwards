<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê°ë³¸ìƒ ë°ì´í„° ì¶”ì¶œê¸°</title>
    <style>
        body { font-family: 'Pretendard', -apple-system, sans-serif; padding: 40px; background: #f0f2f5; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: #1a73e8; border-bottom: 2px solid #e8f0fe; padding-bottom: 10px; }
        
        .controls { margin: 20px 0; display: flex; gap: 10px; flex-wrap: wrap; }
        button { 
            padding: 10px 20px; cursor: pointer; font-weight: 600; border: none; border-radius: 6px; 
            transition: all 0.2s; display: flex; align-items: center; gap: 8px;
        }
        .btn-extract { background: #1a73e8; color: white; }
        .btn-copy { background: #34a853; color: white; }
        .btn-download { background: #fbbc05; color: white; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        button:active { transform: translateY(0); }
        
        #output { 
            width: 100%; height: 450px; background: #282c34; color: #abb2bf;
            border: 1px solid #181a1f; padding: 20px; white-space: pre-wrap; 
            overflow-y: auto; font-family: 'Fira Code', 'Consolas', monospace; 
            font-size: 14px; border-radius: 8px; box-sizing: border-box;
        }
        .status { margin-top: 10px; font-size: 14px; color: #666; }
    </style>
</head>
<body>

<div class="container">
    <h2>âœï¸ ê°ë³¸ìƒ(scriptwriter) ë°ì´í„° ì¶”ì¶œ ë„êµ¬</h2>
    <p><code>animeData.js</code>ì˜ ë°ì´í„°ë¥¼ ê°ë³¸ìƒ ë…¸ë¯¸ë„¤ì´íŠ¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>

    <div class="controls">
        <button class="btn-extract" onclick="extractData()">ğŸ” ë°ì´í„° ì¶”ì¶œ</button>
        <button class="btn-copy" onclick="copyToClipboard()">ğŸ“‹ í´ë¦½ë³´ë“œ ë³µì‚¬</button>
        <button class="btn-download" onclick="downloadJS()">ğŸ’¾ .js íŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
    </div>

    <div id="output">// ì¶”ì¶œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
    <div id="status" class="status"></div>
</div>

<script src="../data/animeData.js"></script>

<script>
    let generatedContent = "";

    function extractData() {
        if (typeof AnimeByQuarter === 'undefined') {
            alert("animeData.js íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë°ì´í„° êµ¬ì¡°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return;
        }

        const nominatedList = [];

        for (const quarter in AnimeByQuarter) {
            AnimeByQuarter[quarter].forEach(anime => {
                if (anime.staff && anime.staff.scriptwriter && anime.staff.scriptwriter.length > 0) {
                    nominatedList.push({
                        id: anime.id,
                        title: anime.title,
                        thumbnail: `../${anime.thumbnail}`,
                        studio: anime.studio,
                        scriptwriter: anime.staff.scriptwriter
                    });
                }
            });
        }

        generatedContent = "const scriptwriterData = " + JSON.stringify(nominatedList, null, 2) + ";";
        document.getElementById('output').textContent = generatedContent;
        document.getElementById('status').textContent = `ì´ ${nominatedList.length}ê°œì˜ ì‘í’ˆì´ ì¶”ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.`;
    }

    function copyToClipboard() {
        if (!generatedContent) {
            alert("ë¨¼ì € ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”.");
            return;
        }
        navigator.clipboard.writeText(generatedContent).then(() => {
            alert("í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! scriptwriterData.js íŒŒì¼ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.");
        });
    }

    function downloadJS() {
        if (!generatedContent) {
            alert("ë¨¼ì € ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”.");
            return;
        }
        const blob = new Blob([generatedContent], { type: 'text/javascript' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'scriptwriterData.js';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
</script>

</body>
</html>